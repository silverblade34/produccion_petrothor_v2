"use strict";(self["webpackChunklogin_vue"]=self["webpackChunklogin_vue"]||[]).push([[370],{3745:function(e,s,a){a.r(s),a.d(s,{default:function(){return Q}});var o=a(3396);const t={class:"h-full w-full"},r={class:"mb-8 flex justify-between items-center"},l=(0,o._)("h3",{class:"text-2xl font-semibold text-neutral-600"},"Administrar cuentas",-1),n={class:"relative text-sm overflow-x-auto shadow-md sm:rounded-2xl"};function i(e,s,a,i,c,u){const d=(0,o.up)("TableUsers"),p=(0,o.up)("ModalCreateCuentaVue");return(0,o.wg)(),(0,o.iD)("section",t,[(0,o._)("div",r,[l,(0,o._)("button",{onClick:s[0]||(s[0]=(...e)=>i.openModal&&i.openModal(...e)),class:"py-2 px-3 rounded-xl bg-orange-600 text-white text-sm hover:bg-orange-700 transition duration-300"}," Crear cuenta ")]),(0,o._)("div",n,[(0,o.Wm)(d,{listaUsuarios:i.ListUsers},null,8,["listaUsuarios"])]),i.openModalV?((0,o.wg)(),(0,o.j4)(p,{key:0,onCloseModal:i.closeModal,onSaveDatos:i.crearCuenta},null,8,["onCloseModal","onSaveDatos"])):(0,o.kq)("",!0)])}var c=a(4870),u=a(4239),d=a(4161);const p="http://67.205.184.183:3000/api/";function m(e,s){return d.Z.get(`${p}usuarios/listar_clientes?tipousuario=${s}&codempresa=${e}`)}function g(e,s,a,o,t,r){return d.Z.post(`${p}usuarios/crear_usuarios`,{codempresa_cuenta:e,tipousuario:s,usuario:a,password:t,empresa_conductor:o,codempresa_new:r})}var w=a(7139),x=a.p+"img/icon-user.d6deea94.png";const h={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},f=(0,o._)("thead",{class:"text-xs uppercase bg-gray-400 text-white"},[(0,o._)("tr",null,[(0,o._)("th",{scope:"col",class:"px-6 py-3"}," Usuario "),(0,o._)("th",{scope:"col",class:"px-6 py-3"}," Empresa "),(0,o._)("th",{scope:"col",class:"px-6 py-3"}," Estado "),(0,o._)("th",{scope:"col",class:"px-6 py-3"}," Acciones ")])],-1),y={scope:"row",class:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap dark:text-white"},b=(0,o._)("img",{class:"w-10 h-10 rounded-full",src:x,alt:"Icon user"},null,-1),v={class:"pl-3"},_={class:"text-gray-800 font-medium"},C={class:"px-6 py-4 text-gray-800"},k=(0,o._)("td",{class:"px-6 py-4 text-gray-800"},[(0,o._)("div",{class:"flex items-center"},[(0,o._)("div",{class:"h-2.5 w-2.5 rounded-full bg-green-500 mr-2"}),(0,o.Uk)(" Activo ")])],-1),U=(0,o._)("td",{class:"px-6 py-4"},[(0,o._)("a",{href:"#",class:"mr-2 p-2 font-medium text-white dark:text-white hover:underline bg-green-500 rounded-lg"},"Editar"),(0,o._)("a",{href:"#",class:"p-2 font-medium text-white dark:text-white hover:underline bg-red-500 rounded-lg"},"Eliminar")],-1);function V(e,s,a,t,r,l){return(0,o.wg)(),(0,o.iD)("table",h,[f,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.listaUsuarios,(e=>((0,o.wg)(),(0,o.iD)("tr",{class:"bg-white border-b",key:e.id},[(0,o._)("th",y,[b,(0,o._)("div",v,[(0,o._)("div",_,(0,w.zw)(e.usuario),1)])]),(0,o._)("td",C,(0,w.zw)(e.conductor),1),k,U])))),128))])])}var M={name:"TableUsers",props:{listaUsuarios:Array}},D=a(89);const P=(0,D.Z)(M,[["render",V]]);var Z=P,E=a(9242);const L={class:"fixed inset-0 flex items-center justify-center z-50"},$=(0,o._)("div",{class:"absolute inset-0 bg-black opacity-30 pointer-events-none"},null,-1),j={class:"relative z-10 p-4 bg-slate-200 rounded-xl min-w-[350px]"},z={class:"p-2 text-gray-700 w-full h-full text-sm"},A=(0,o._)("h3",{class:"text-center font-bold text-lg"},"Crear cuenta",-1),q=(0,o._)("p",{class:"py-1"},"Usuario",-1),H=(0,o._)("p",{class:"py-1"},"Empresa",-1),I=(0,o._)("p",{class:"py-1"},"Codigo Empresa",-1),S=(0,o._)("p",{class:"py-1"},"Contraseña",-1),T={class:"relative"},Y=["type"],K={key:0,class:"fa-solid fa-eye"},N={key:1,class:"fa-solid fa-eye-slash fa-lg"},R=(0,o._)("p",{class:"py-1"},"Confirmar contraseña",-1),W={class:"btns flex gap-2 justify-center items-center pt-2"};function X(e,s,a,t,r,l){return(0,o.wg)(),(0,o.iD)("div",L,[$,(0,o._)("div",j,[(0,o._)("form",z,[A,q,(0,o.wy)((0,o._)("input",{type:"text",name:"usuario","onUpdate:modelValue":s[0]||(s[0]=e=>r.usuario=e),class:"w-full text-sm p-2 px-3 rounded-lg focus:outline-none focus:border-blue-500",placeholder:"Usuario de cuenta"},null,512),[[E.nr,r.usuario]]),H,(0,o.wy)((0,o._)("input",{type:"text",name:"empresa","onUpdate:modelValue":s[1]||(s[1]=e=>r.empresa=e),class:"w-full text-sm p-2 px-3 rounded-lg focus:outline-none focus:border-blue-500",placeholder:"Nombre de empresa"},null,512),[[E.nr,r.empresa]]),I,(0,o.wy)((0,o._)("input",{type:"text",name:"codempresa","onUpdate:modelValue":s[2]||(s[2]=e=>r.codempresa=e),class:"w-full text-sm p-2 px-3 rounded-lg focus:outline-none focus:border-blue-500",placeholder:"Ejemplo: CX003"},null,512),[[E.nr,r.codempresa]]),S,(0,o._)("div",T,[(0,o.wy)((0,o._)("input",{type:r.showPassword?"text":"password",name:"password","onUpdate:modelValue":s[3]||(s[3]=e=>r.password=e),class:"w-full text-sm p-2 px-3 rounded-lg focus:outline-none focus:border-blue-500",placeholder:"Ingrese contraseña"},null,8,Y),[[E.YZ,r.password]]),(0,o._)("button",{onClick:s[4]||(s[4]=(0,E.iM)(((...e)=>l.togglePasswordVisibility&&l.togglePasswordVisibility(...e)),["prevent"])),class:"absolute top-1/2 right-3 transform -translate-y-1/2 focus:outline-none"},[r.showPassword?((0,o.wg)(),(0,o.iD)("i",K)):((0,o.wg)(),(0,o.iD)("i",N))])]),R,(0,o._)("input",{type:"password",name:"repeatpassword",class:"w-full text-sm p-2 px-3 rounded-lg focus:outline-none focus:border-blue-500",placeholder:"Repita contraseña",onInput:s[5]||(s[5]=(...e)=>l.validatePassword&&l.validatePassword(...e))},null,32),""!==r.msgValidacion?((0,o.wg)(),(0,o.iD)("p",{key:0,class:(0,w.C_)({"text-green-500 text-xs":"Las contraseñas coinciden"===r.msgValidacion,"text-red-500 text-xs":"Las contraseñas no coinciden"===r.msgValidacion})},(0,w.zw)(r.msgValidacion),3)):(0,o.kq)("",!0)]),(0,o._)("div",W,[(0,o._)("button",{onClick:s[6]||(s[6]=(...e)=>l.closeModal&&l.closeModal(...e)),class:"bg-gray-400 hover:bg-gray-500 text-white text-sm p-2 px-4 rounded-xl transition duration-300"},"Cerrar"),(0,o._)("button",{onClick:s[7]||(s[7]=(...e)=>l.saveDatos&&l.saveDatos(...e)),class:"bg-blue-400 hover:bg-blue-500 text-white text-sm p-2 px-4 rounded-xl transition duration-300"},"Crear")])])])}var B={name:"ModalCreateCuenta",data(){return{usuario:"",empresa:"",codempresa:"",password:"",showPassword:!1,msgValidacion:""}},methods:{closeModal(){this.$emit("close-modal")},saveDatos(){console.log("Usuario:",this.usuario),console.log("Empresa:",this.empresa),console.log("Contraseña:",this.password),console.log("CodEmpresa:",this.codempresa),this.$emit("save-datos",{usuario:this.usuario,empresa:this.empresa,password:this.password,codempresa:this.codempresa})},togglePasswordVisibility(){this.showPassword=!this.showPassword},validatePassword(e){const s=document.querySelector('input[name="password"]').value,a=e.target.value;s===a?(this.msgValidacion="Las contraseñas coinciden",console.log("Las contraseñas coinciden")):(this.msgValidacion="Las contraseñas no coinciden",console.log("Las contraseñas no coinciden"))}}};const F=(0,D.Z)(B,[["render",X]]);var G=F,J={name:"AdminCuentas",components:{TableUsers:Z,ModalCreateCuentaVue:G},setup(){const e=(0,c.iH)([]),s=(0,c.iH)(!1);(0,o.bv)((()=>{m(u.Z.state.codempresa,u.Z.state.tipousuario).then((s=>{e.value=s.data.usuarios}))}));const a=()=>{s.value=!0},t=()=>{s.value=!1},r=e=>{const a=e.usuario,o=e.empresa,t=e.password,r=e.codempresa;g(u.Z.state.codempresa,u.Z.state.tipousuario,a,o,t,r).then((e=>{console.log(e),s.value=!1,window.location.reload()}))};return{ListUsers:e,openModalV:s,openModal:a,closeModal:t,crearCuenta:r}}};const O=(0,D.Z)(J,[["render",i]]);var Q=O}}]);
//# sourceMappingURL=370.25b0ce3d.js.map