"use strict";(self["webpackChunklogin_vue"]=self["webpackChunklogin_vue"]||[]).push([[714],{1004:function(e,a,o){o.r(a),o.d(a,{default:function(){return ye}});var t=o(3396),l=o(9242);const r=e=>((0,t.dD)("data-v-6d9beb7e"),e=e(),(0,t.Cn)(),e),n={class:"min-h-full w-full pb-[5rem] lg:pb-[2rem]"},s={class:"mb-8 flex justify-between items-center"},i=r((()=>(0,t._)("h3",{class:"title-vista text-2xl font-semibold text-neutral-600"},"Administrar cuentas",-1))),u={class:"text-sm overflow-x-auto shadow-md sm:rounded-2xl"};function c(e,a,o,r,c,d){const m=(0,t.up)("TableCuentasMaestras"),p=(0,t.up)("ModalCreate"),v=(0,t.up)("ModalDelete"),g=(0,t.up)("ModalEditar"),x=(0,t.up)("ModalError"),b=(0,t.up)("ConfirmEdit");return(0,t.wg)(),(0,t.iD)("section",n,[(0,t._)("div",s,[i,(0,t._)("button",{onClick:a[0]||(a[0]=(0,l.iM)(((...e)=>r.openModal&&r.openModal(...e)),["prevent"])),class:"py-2 px-3 rounded-xl bg-orange-400 text-white text-sm hover:bg-orange-500 transition duration-300"}," Crear cuenta ")]),(0,t._)("div",u,[(0,t.Wm)(m,{listaCuentasMaestras:r.listaCuentasMaestras,onEliminarCuentamaster:r.eliminarCuentaMaster,onEditarCuentamaster:r.editarUsuario},null,8,["listaCuentasMaestras","onEliminarCuentamaster","onEditarCuentamaster"])]),(0,t.Wm)(l.uT,{name:"modal",mode:"out-in"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(p,{onCloseModal:r.closeModal,onSaveDatos:r.crearCuentaMaster},null,8,["onCloseModal","onSaveDatos"]),[[l.F8,r.openModalV]])])),_:1}),(0,t.Wm)(l.uT,{name:"modal",mode:"out-in"},{default:(0,t.w5)((()=>[r.confirmDelete?((0,t.wg)(),(0,t.j4)(v,{key:0,onAceptarEliminar:r.aceptarEliminar,onCancelarEliminar:r.cancelarEliminar,pregunta:"¿Estás seguro de eliminar a esta cuenta master?"},null,8,["onAceptarEliminar","onCancelarEliminar"])):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(l.uT,{name:"modal",mode:"out-in"},{default:(0,t.w5)((()=>[r.openModalEdit?((0,t.wg)(),(0,t.j4)(g,{key:0,onAceptarEditar:r.aceptarEditar,onCancelarEditar:r.cancelarEditar,idCuentaMaestra:r.idCuentaMaster,idEmpresa:e.idEmpresaSet},null,8,["onAceptarEditar","onCancelarEditar","idCuentaMaestra","idEmpresa"])):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(l.uT,{name:"modal",mode:"out-in"},{default:(0,t.w5)((()=>[r.openModalError?((0,t.wg)(),(0,t.j4)(x,{key:0,title:"Advertencia",mensaje:"Se debe rellenar todos los campos",onCloseModal:r.closeModalError},null,8,["onCloseModal"])):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(l.uT,{name:"modal",mode:"out-in"},{default:(0,t.w5)((()=>[r.openSuccessEdit?((0,t.wg)(),(0,t.j4)(b,{key:0,title:"Logrado",mensaje:"Se ha editado correctamente",onCloseModal:r.closeSuccessEdit},null,8,["onCloseModal"])):(0,t.kq)("",!0)])),_:1})])}var d=o(4870),m=o(4239),p=o(7139),v=o(7794);const g={class:"w-full text-xs text-left text-gray-500 dark:text-gray-400"},x=(0,t._)("thead",{class:"text-xs uppercase bg-gray-400 text-white"},[(0,t._)("tr",null,[(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Usuario "),(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Empresa "),(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Codigo empresa "),(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Dirección "),(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Ruc "),(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Telefono "),(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Acciones ")])],-1),b={scope:"row",class:"flex items-center px-6 py-3 text-gray-900 whitespace-nowrap"},w=(0,t._)("img",{class:"w-10 h-10 rounded-full",src:v,alt:"Icon user"},null,-1),C={class:"pl-3"},f={class:"text-gray-800 font-medium"},_={class:"px-6 py-3 text-gray-800"},h={class:"px-6 py-3 text-gray-800"},M={class:"px-6 py-3 text-gray-800"},y={class:"px-6 py-3 text-gray-800"},E={class:"px-6 py-3 text-gray-800"},I={class:"px-6 py-3"},H=["onClick"],V=["onClick"];function D(e,a,o,r,n,s){return(0,t.wg)(),(0,t.iD)("table",g,[x,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.listaCuentasMaestras,(e=>((0,t.wg)(),(0,t.iD)("tr",{class:"bg-white border-b hover:bg-gray-100 ease-in duration-300",key:e.id},[(0,t._)("th",b,[w,(0,t._)("div",C,[(0,t._)("div",f,(0,p.zw)(e.usuario),1)])]),(0,t._)("td",_,(0,p.zw)(e.nombre),1),(0,t._)("td",h,(0,p.zw)(e.codempresa),1),(0,t._)("td",M,(0,p.zw)(e.direccion),1),(0,t._)("td",y,(0,p.zw)(e.ruc),1),(0,t._)("td",E,(0,p.zw)(e.contacto),1),(0,t._)("td",I,[(0,t._)("a",{href:"#",class:"mr-2 p-2 font-medium text-white bg-green-500 hover:bg-green-700 ease-in duration-300 rounded-lg",onClick:(0,l.iM)((a=>s.editarCuentaMaster(e.id,e.id_cuentamaestra)),["prevent"])},"Editar",8,H),(0,t._)("a",{href:"#",class:"p-2 font-medium text-white bg-red-500 hover:bg-red-700 ease-in duration-300 rounded-lg",onClick:(0,l.iM)((a=>s.eliminarCuentaMaster(e.id,e.id_cuentamaestra)),["prevent"])},"Eliminar",8,V)])])))),128))])])}var k={name:"TableCuentasMaestras",props:{listaCuentasMaestras:Array},methods:{eliminarCuentaMaster(e,a){this.$emit("eliminar-cuentamaster",e,a)},editarCuentaMaster(e,a){this.$emit("editar-cuentamaster",e,a)}}},z=o(89);const W=(0,z.Z)(k,[["render",D]]);var Z=W;const U={class:"fixed inset-0 flex items-center justify-center z-[9999] py-5"},R=(0,t._)("div",{class:"absolute inset-0 bg-black opacity-30 pointer-events-none"},null,-1),S={class:"relative z-10 p-4 bg-white rounded-xl lg:min-w-[350px] lg:max-w-[450px] min-w-[340px] max-w-[350px]"},T={class:"p-2 text-gray-700 w-full h-full text-sm"},j=(0,t._)("h3",{class:"text-center font-bold text-lg"},"Crear cuenta master",-1),P={class:"dropdown"},$=(0,t._)("span",null,"Detalles empresa",-1),A=(0,t._)("i",{class:"fa-solid fa-angle-down"},null,-1),F=[$,A],N={class:"btns flex gap-2 justify-center items-center pt-2"};function q(e,a,o,r,n,s){const i=(0,t.up)("ItemForm"),u=(0,t.up)("PasswordField");return(0,t.wg)(),(0,t.iD)("div",U,[R,(0,t._)("div",S,[(0,t._)("form",T,[j,(0,t.Wm)(i,{onValueInput:r.saveNombreComercial,label:"Nombre comercial",name:"nombre_comercial",id:"nombre_comercial",placeholder:"Ingrese el nombre comercial de la empresa",value:""},null,8,["onValueInput"]),(0,t.Wm)(i,{onValueInput:r.saveRazonSocial,label:"Razón social",name:"empresa",id:"empresa",placeholder:"Ingrese el nombre de la empresa",value:""},null,8,["onValueInput"]),(0,t.Wm)(i,{onValueInput:r.updateusuario,label:"Usuario",name:"usuario",id:"usuario",placeholder:"Ingrese un usuario",value:""},null,8,["onValueInput"]),(0,t.Wm)(u,{onUpdatePaswoord:r.updatepassword,texto:"Contraseña",placeholder:"Ingrese contraseña"},null,8,["onUpdatePaswoord"]),(0,t.Wm)(u,{onUpdatePaswoord:r.updatepasswordRepeat,texto:"Confirmar contraseña",placeholder:"Repita su contraseña"},null,8,["onUpdatePaswoord"]),""!==r.msgValidacion?((0,t.wg)(),(0,t.iD)("p",{key:0,class:(0,p.C_)({"text-green-500 text-xs":"Las contraseñas coinciden"===r.msgValidacion,"text-red-400 text-xs":"Las contraseñas no coinciden"===r.msgValidacion})},(0,p.zw)(r.msgValidacion),3)):(0,t.kq)("",!0),(0,t._)("div",P,[(0,t._)("button",{class:(0,p.C_)(["dropdown-toggle bg-orange-400 flex justify-between items-center w-full rounded-lg text-white px-5 py-2 mt-2",{"bg-orange-500":r.mostrarContacto}]),onClick:a[0]||(a[0]=(0,l.iM)(((...e)=>r.toggleContacto&&r.toggleContacto(...e)),["prevent"]))},F,2),(0,t._)("div",{class:(0,p.C_)(["dropdown-menu mx-2 px-2 py-4 rounded-md bg-slate-200 transition-max-height duration-300",{"max-h-[500px]":r.mostrarContacto,"max-h-0":!r.mostrarContacto,"overflow-hidden":!r.mostrarContacto,"pt-0 pb-0":!r.mostrarContacto}])},[(0,t.Wm)(i,{onValueInput:r.saveRuc,label:"RUC",name:"ruc",placeholder:"Ruc de la empresa",value:""},null,8,["onValueInput"]),(0,t.Wm)(i,{onValueInput:r.saveDireccion,label:"Dirección",name:"direccion",placeholder:"Dirección de la empresa"},null,8,["onValueInput"]),(0,t.Wm)(i,{onValueInput:r.saveTelefono,label:"Teléfono",name:"telefono",placeholder:"Número de contacto"},null,8,["onValueInput"])],2)])]),(0,t._)("div",N,[(0,t._)("button",{onClick:a[1]||(a[1]=(...e)=>r.closeModal&&r.closeModal(...e)),class:"bg-gray-400 hover:bg-gray-500 text-white text-sm p-2 px-4 rounded-xl transition duration-300"},"Cerrar"),(0,t._)("button",{onClick:a[2]||(a[2]=(...e)=>r.saveDatos&&r.saveDatos(...e)),class:"bg-blue-400 hover:bg-blue-500 text-white text-sm p-2 px-4 rounded-xl transition duration-300"},"Crear")])])])}var L=o(3455),K=o(8692),Y={name:"ModalCreate",components:{PasswordField:L.Z,ItemForm:K.Z},emits:["close-modal","save-datos"],setup(e,{emit:a}){const o=(0,d.iH)(""),t=(0,d.iH)(""),l=(0,d.iH)(""),r=(0,d.iH)(""),n=(0,d.iH)(""),s=(0,d.iH)(""),i=(0,d.iH)(""),u=(0,d.iH)(""),c=(0,d.iH)(""),m=(0,d.iH)(""),p=(0,d.iH)(!1),v=(0,d.iH)(!1),g=()=>{p.value=!p.value},x=()=>{v.value=!v.value},b=e=>{o.value=e},w=e=>{t.value=e},C=e=>{r.value=e},f=e=>{l.value=e},_=e=>{c.value=e,V()},h=e=>{n.value=e},M=e=>{u.value=e},y=e=>{s.value=e},E=e=>{i.value=e},I=()=>{a("close-modal")},H=()=>{a("save-datos",{usuario:o.value,razonsocial:t.value,password:r.value,nombrecomercial:l.value,ruc:u.value,correo:s.value,telefono:i.value,direccion:n.value})},V=()=>{r.value===c.value?m.value="Las contraseñas coinciden":m.value="Las contraseñas no coinciden"};return{usuario:o,razonsocial:t,password:r,direccion:n,correo:s,telefono:i,ruc:u,repeatpassword:c,msgValidacion:m,mostrarUbicacion:p,mostrarContacto:v,toggleUbicacion:g,toggleContacto:x,updateusuario:b,saveRazonSocial:w,updatepassword:C,updatepasswordRepeat:_,saveDireccion:h,saveRuc:M,saveCorreo:y,saveNombreComercial:f,saveTelefono:E,closeModal:I,saveDatos:H,validatePassword:V}}};const B=(0,z.Z)(Y,[["render",q]]);var G=B,J=o(4050),O=o(1968),Q=o(4229);const X={class:"fixed inset-0 flex items-center justify-center z-[9999] py-5"},ee=(0,t._)("div",{class:"absolute inset-0 bg-black opacity-30 pointer-events-none"},null,-1),ae={class:"relative z-10 p-4 bg-white rounded-xl lg:min-w-[350px] lg:max-w-[450px] min-w-[340px] max-w-[350px]"},oe={class:"p-2 text-gray-700 w-full h-full text-sm"},te=(0,t._)("h3",{class:"text-center font-bold text-lg"},"Crear cuenta master",-1),le={class:"dropdown"},re=(0,t._)("span",null,"Detalles empresa",-1),ne=(0,t._)("i",{class:"fa-solid fa-angle-down"},null,-1),se=[re,ne],ie={class:"btns flex gap-2 justify-center items-center pt-2"};function ue(e,a,o,r,n,s){const i=(0,t.up)("ItemForm"),u=(0,t.up)("PasswordField");return(0,t.wg)(),(0,t.iD)("div",X,[ee,(0,t._)("div",ae,[(0,t._)("form",oe,[te,(0,t.Wm)(i,{onValueInput:r.saveNombreComercial,label:"Nombre comercial",name:"nombre_comercial",id:"nombre_comercial",placeholder:"Ingrese el nombre comercial de la empresa",value:r.nombrecomercial},null,8,["onValueInput","value"]),(0,t.Wm)(i,{onValueInput:r.saveRazonSocial,label:"Razón social",name:"empresa",id:"empresa",placeholder:"Ingrese el nombre de la empresa",value:r.razonsocial},null,8,["onValueInput","value"]),(0,t.Wm)(i,{onValueInput:r.updateusuario,label:"Usuario",name:"usuario",id:"usuario",placeholder:"Ingrese un usuario",value:r.usuario},null,8,["onValueInput","value"]),(0,t.Wm)(u,{onUpdatePaswoord:r.updatepassword,texto:"Contraseña",placeholder:"Ingrese contraseña",valor:r.password},null,8,["onUpdatePaswoord","valor"]),(0,t._)("div",le,[(0,t._)("button",{class:(0,p.C_)(["dropdown-toggle bg-orange-400 flex justify-between items-center w-full rounded-lg text-white px-5 py-2 mt-2",{"bg-orange-500":r.mostrarContacto}]),onClick:a[0]||(a[0]=(0,l.iM)(((...e)=>r.toggleContacto&&r.toggleContacto(...e)),["prevent"]))},se,2),(0,t._)("div",{class:(0,p.C_)(["dropdown-menu mx-2 px-2 py-4 rounded-md bg-slate-200 transition-max-height duration-300",{"max-h-[500px]":r.mostrarContacto,"max-h-0":!r.mostrarContacto,"overflow-hidden":!r.mostrarContacto,"pt-0 pb-0":!r.mostrarContacto}])},[(0,t.Wm)(i,{onValueInput:r.saveRuc,label:"RUC",name:"ruc",placeholder:"Ruc de la empresa",value:r.ruc},null,8,["onValueInput","value"]),(0,t.Wm)(i,{onValueInput:r.saveDireccion,label:"Dirección",name:"direccion",placeholder:"Dirección de la empresa",value:r.direccion},null,8,["onValueInput","value"]),(0,t.Wm)(i,{onValueInput:r.saveTelefono,label:"Teléfono",name:"telefono",placeholder:"Número de contacto",value:r.telefono},null,8,["onValueInput","value"])],2)])]),(0,t._)("div",ie,[(0,t._)("button",{onClick:a[1]||(a[1]=(...e)=>r.closeModal&&r.closeModal(...e)),class:"bg-gray-400 hover:bg-gray-500 text-white text-sm p-2 px-4 rounded-xl transition duration-300"},"Cerrar"),(0,t._)("button",{onClick:a[2]||(a[2]=(...e)=>r.saveDatos&&r.saveDatos(...e)),class:"bg-blue-400 hover:bg-blue-500 text-white text-sm p-2 px-4 rounded-xl transition duration-300"},"Actualizar")])])])}var ce=o(4161);const de="http://67.205.184.183:3000/api/";function me(){return ce.Z.get(`${de}cuentasmaestras/list`)}function pe(e){return ce.Z.get(`${de}cuentasmaestras/search?idCuentaMaestra=${e}`)}function ve(e,a,o){return ce.Z.put(`${de}cuentasmaestras/edit`,{codempresa_root:e,tipousuario_root:a,nombre_comercial:o.nombrecomercial,razon_social:o.razonsocial,usuario:o.usuario,clave:o.password,direccion:o.direccion,ruc:o.ruc,contacto:o.telefono,id_usuario:o.id_usuario,id_cuentamaestra:o.id_cuentamaestra})}function ge(e,a,o){return ce.Z.post(`${de}cuentasmaestras/create`,{codempresa_root:e,tipousuario_root:a,nombre_comercial:o.nombrecomercial,razon_social:o.razonsocial,usuario:o.usuario,clave:o.password,direccion:o.direccion,ruc:o.ruc,contacto:o.telefono})}function xe(e,a,o){return ce.Z["delete"](`${de}cuentasmaestras/delete?idUsuario=${e}&idCuentaMaestra=${a}&tipousuario=${o}`)}var be=o(9564),we=o.n(be),Ce={name:"ModalEditar",components:{PasswordField:L.Z,ItemForm:K.Z},emits:["cancelar-editar","aceptar-editar"],props:{idCuentaMaestra:String},setup(e,{emit:a}){const o=(0,d.iH)(""),l=(0,d.iH)(""),r=(0,d.iH)(""),n=(0,d.iH)(""),s=(0,d.iH)(""),i=(0,d.iH)(""),u=(0,d.iH)(""),c=(0,d.iH)(""),m=(0,d.iH)(""),p=(0,d.iH)(""),v=(0,d.iH)(""),g=(0,d.iH)(!1),x=(0,d.iH)(!1);(0,t.bv)((()=>{pe(e.idCuentaMaestra).then((e=>{o.value=e.data.cuentasmaestras[0].usuario,l.value=e.data.cuentasmaestras[0].empresa,r.value=e.data.cuentasmaestras[0].nombre,n.value=e.data.cuentasmaestras[0].clave,s.value=e.data.cuentasmaestras[0].direccion,i.value=e.data.cuentasmaestras[0].contacto,u.value=e.data.cuentasmaestras[0].ruc,m.value=e.data.cuentasmaestras[0].id_cuentamaestra,c.value=e.data.cuentasmaestras[0].id}))}));const b=()=>{g.value=!g.value},w=()=>{x.value=!x.value},C=e=>{o.value=e},f=e=>{l.value=e},_=e=>{p.value=e},h=e=>{r.value=e},M=e=>{s.value=e},y=e=>{u.value=e},E=e=>{i.value=e},I=()=>{a("cancelar-editar")},H=()=>{let e=n.value;""!==p.value&&(e=we()(p.value)),a("aceptar-editar",{usuario:o.value,razonsocial:l.value,password:e,nombrecomercial:r.value,ruc:u.value,telefono:i.value,direccion:s.value,id_cuentamaestra:m.value,id_usuario:c.value})};return{usuario:o,razonsocial:l,nombrecomercial:r,password:n,direccion:s,telefono:i,ruc:u,msgValidacion:v,mostrarUbicacion:g,mostrarContacto:x,toggleUbicacion:b,toggleContacto:w,updateusuario:C,saveRazonSocial:f,updatepassword:_,saveDireccion:M,saveRuc:y,saveNombreComercial:h,saveTelefono:E,closeModal:I,saveDatos:H}}};const fe=(0,z.Z)(Ce,[["render",ue]]);var _e=fe,he={name:"AdminCuentasMaestras",components:{TableCuentasMaestras:Z,ModalCreate:G,ModalDelete:J.Z,ModalEditar:_e,ModalError:O.Z,ConfirmEdit:Q.Z},setup(){const e=(0,d.iH)([]),a=(0,d.iH)(!1),o=(0,d.iH)(!1),l=(0,d.iH)(!1),r=(0,d.iH)(!1),n=(0,d.iH)(""),s=(0,d.iH)(""),i=(0,d.iH)(!1);(0,t.bv)((()=>{me().then((a=>{e.value=a.data.cuentasmaestras}))}));const u=()=>{a.value=!0},c=()=>{a.value=!1},p=()=>{l.value=!1},v=()=>{i.value=!1,window.location.reload()},g=e=>{""==e.usuario||""==e.razonsocial||""==e.password||""==e.direccion||""==e.nombrecomercial||""==e.telefono||""==e.ruc?(a.value=!1,l.value=!0):ge(m.Z.state.codempresa,m.Z.state.tipousuario,e).then((()=>{a.value=!1,window.location.reload()})).catch((e=>{console.log(e)}))},x=(e,a)=>{n.value=e,s.value=a,o.value=!0},b=()=>{xe(n.value,s.value,m.Z.state.tipousuario).then((e=>{console.log(e),window.location.reload(),o.value=!1,n.value="",s.value=""}))},w=()=>{o.value=!1,n.value="",s.value=""},C=(e,a)=>{n.value=e,s.value=a,r.value=!0},f=()=>{r.value=!1},_=e=>{""==e.usuario||""==e.razonsocial||""==e.password||""==e.direccion||""==e.nombrecomercial||""==e.telefono||""==e.ruc?(r.value=!1,l.value=!0):ve(m.Z.state.codempresa,m.Z.state.tipousuario,e).then((e=>{console.log(e),i.value=!0,r.value=!1}))};return{listaCuentasMaestras:e,openModalV:a,openModal:u,closeModal:c,crearCuentaMaster:g,confirmDelete:o,eliminarCuentaMaster:x,aceptarEliminar:b,cancelarEliminar:w,closeModalError:p,cancelarEditar:f,openModalError:l,openModalEdit:r,editarUsuario:C,idUsuarioSet:n,idCuentaMaster:s,aceptarEditar:_,openSuccessEdit:i,closeSuccessEdit:v}}};const Me=(0,z.Z)(he,[["render",c],["__scopeId","data-v-6d9beb7e"]]);var ye=Me},7794:function(e,a,o){e.exports=o.p+"img/icon-user.d6deea94.png"}}]);
//# sourceMappingURL=714.fb8fab81.js.map