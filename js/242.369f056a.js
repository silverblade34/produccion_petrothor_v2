"use strict";(self["webpackChunklogin_vue"]=self["webpackChunklogin_vue"]||[]).push([[242],{3002:function(e,a,o){o.r(a),o.d(a,{default:function(){return pe}});var t=o(3396),n=o(9242);const l=e=>((0,t.dD)("data-v-72502bf6"),e=e(),(0,t.Cn)(),e),r={class:"min-h-full w-full pb-[5rem] lg:pb-[2rem]"},s={class:"mb-8 flex justify-between items-center"},i=l((()=>(0,t._)("h3",{class:"title-vista text-2xl font-semibold text-neutral-600"},"Administrar conductores",-1))),d={class:"overflow-x-auto shadow-md sm:rounded-lg"};function u(e,a,o,l,u,c){const p=(0,t.up)("TableConductores"),m=(0,t.up)("ModalCreate"),v=(0,t.up)("ModalDelete"),x=(0,t.up)("ModalEditar"),g=(0,t.up)("ModalError"),_=(0,t.up)("ConfirmEdit");return(0,t.wg)(),(0,t.iD)("section",r,[(0,t._)("div",s,[i,(0,t._)("button",{onClick:a[0]||(a[0]=(...e)=>l.openModal&&l.openModal(...e)),class:"py-2 px-3 rounded-xl bg-orange-400 text-white lg:text-sm text-xs hover:bg-orange-500 transition duration-300"}," Crear nuevo ")]),(0,t._)("div",d,[(0,t.Wm)(p,{listConductores:l.listConductores,onEliminarConductor:l.eliminarConductor,onEditarConductor:l.editarConductor},null,8,["listConductores","onEliminarConductor","onEditarConductor"])]),(0,t.Wm)(n.uT,{name:"modal",mode:"out-in"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(m,{onCloseModal:l.closeModal,onSaveDatos:l.saveDatos},null,8,["onCloseModal","onSaveDatos"]),[[n.F8,l.openModalV]])])),_:1}),(0,t.Wm)(n.uT,{name:"modal",mode:"out-in"},{default:(0,t.w5)((()=>[l.confirmDelete?((0,t.wg)(),(0,t.j4)(v,{key:0,onAceptarEliminar:l.aceptarEliminar,onCancelarEliminar:l.cancelarEliminar,pregunta:"¿Estás seguro de eliminar a este conductor?"},null,8,["onAceptarEliminar","onCancelarEliminar"])):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(n.uT,{name:"modal",mode:"out-in"},{default:(0,t.w5)((()=>[l.openModalEdit?((0,t.wg)(),(0,t.j4)(x,{key:0,onAceptarEditar:l.aceptarEditar,onCancelarEditar:l.cancelarEditar,idUsuario:l.idUsuario,idConductor:l.idConductor},null,8,["onAceptarEditar","onCancelarEditar","idUsuario","idConductor"])):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(n.uT,{name:"modal",mode:"out-in"},{default:(0,t.w5)((()=>[l.openModalError?((0,t.wg)(),(0,t.j4)(g,{key:0,onCloseModal:l.closeModalError,title:"Advertencia",mensaje:"Se debe rellenar todos los campos al crear o editar un conductor"},null,8,["onCloseModal"])):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(n.uT,{name:"modal",mode:"out-in"},{default:(0,t.w5)((()=>[l.openSuccessEdit?((0,t.wg)(),(0,t.j4)(_,{key:0,title:"Logrado",mensaje:"Se ha editado correctamente",onCloseModal:l.closeSuccessEdit},null,8,["onCloseModal"])):(0,t.kq)("",!0)])),_:1})])}var c=o(4870),p=o(4161);const m="http://67.205.184.183:3000/api/";function v(e){return p.Z.get(`${m}conductores/list?codempresa=${e}`)}function x(e,a){return p.Z.get(`${m}conductores/search?id_usuario=${e}&id_conductores=${a}`)}function g(e,a,o,t,n,l){return p.Z.post(`${m}conductores/create`,{numero_documento:e,apellidos_nombres:a,numero_licencia:o,codempresa:t,usuario:n,password:l})}function _(e,a){return p.Z["delete"](`${m}conductores/delete?id_usuario=${e}&id_conductores=${a}`)}function b(e,a,o,t,n,l,r){return p.Z.put(`${m}conductores/edit`,{id_usuario:e,id_conductores:a,numero_documento:o,apellidos_nombres:t,numero_licencia:n,usuario:l,clave:r})}var w=o(7139);const C={class:"w-full text-xs text-left text-gray-800"},h=(0,t._)("thead",{class:"text-xs text-gray-700 uppercase bg-gray-100"},[(0,t._)("tr",null,[(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Usuario "),(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Codempresa "),(0,t._)("th",{scope:"col",class:"px-6 py-3"}," DNI "),(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Nombre y apellidos "),(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Número de licencia "),(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Acciones ")])],-1),f={key:0},y=(0,t._)("td",{class:"border px-4 py-4 text-xs text-center",colspan:"6"},"No se encontró ningún dato para esta tabla",-1),E=[y],M={class:"px-6 py-3"},I={class:"px-6 py-3"},D={class:"px-6 py-3"},k={scope:"row",class:"px-6 py-3 font-medium text-gray-900 whitespace-nowrap"},V={scope:"row",class:"px-6 py-3 font-medium text-gray-900 whitespace-nowrap"},H={class:"px-6 py-2 flex gap-2"},U=["onClick"],W=["onClick"];function Z(e,a,o,l,r,s){return(0,t.wg)(),(0,t.iD)("table",C,[h,(0,t._)("tbody",null,[0===o.listConductores.length?((0,t.wg)(),(0,t.iD)("tr",f,E)):((0,t.wg)(!0),(0,t.iD)(t.HY,{key:1},(0,t.Ko)(o.listConductores,(e=>((0,t.wg)(),(0,t.iD)("tr",{key:e.id_usuario,class:"bg-white border-b hover:bg-gray-50 ease-in duration-300"},[(0,t._)("td",M,(0,w.zw)(e.usuario),1),(0,t._)("td",I,(0,w.zw)(e.codempresa),1),(0,t._)("td",D,(0,w.zw)(e.numero_documento),1),(0,t._)("th",k,(0,w.zw)(e.apellidos_nombres),1),(0,t._)("th",V,(0,w.zw)(e.numero_licencia),1),(0,t._)("td",H,[(0,t._)("button",{class:"font-medium py-[0.5rem] px-3 rounded-lg bg-green-500 hover:bg-green-600 ease-in duration-300 text-white",onClick:(0,n.iM)((a=>s.editarConductor(e.id_usuario,e.id_conductores)),["prevent"])},"Editar",8,U),(0,t._)("button",{class:"font-medium py-[0.5rem] px-3 rounded-lg bg-red-500 hover:bg-red-600 ease-in duration-300 text-white",onClick:(0,n.iM)((a=>s.eliminarConductor(e.id_usuario,e.id_conductores)),["prevent"])},"Eliminar",8,W)])])))),128))])])}var A={name:"TableConductores",props:{listConductores:Array},methods:{eliminarConductor(e,a){this.$emit("eliminar-conductor",{id_usuario:e,id_conductores:a})},editarConductor(e,a){this.$emit("editar-conductor",{id_usuario:e,id_conductores:a})}}},$=o(89);const j=(0,$.Z)(A,[["render",Z]]);var z=j;const N={class:"fixed inset-0 flex items-center justify-center z-[9999]"},P=(0,t._)("div",{class:"absolute inset-0 bg-black opacity-30 pointer-events-none"},null,-1),S={class:"relative z-10 p-4 bg-white rounded-xl lg:min-w-[350px] lg:max-w-[450px] max-w-[340px] min-w-[330px]"},F={class:"p-2 text-gray-700 w-full h-full text-sm"},L=(0,t._)("h3",{class:"text-center font-bold text-lg"},"Crear conductor",-1),T={class:"btns flex gap-2 justify-center items-center pt-2"};function q(e,a,o,n,l,r){const s=(0,t.up)("ItemForm"),i=(0,t.up)("PasswordField");return(0,t.wg)(),(0,t.iD)("div",N,[P,(0,t._)("div",S,[(0,t._)("form",F,[L,(0,t.Wm)(s,{onValueInput:n.saveApellidos,label:"Apellidos y nombres",name:"apellidos_nombres",id:"apellidos_nombres",placeholder:"Inserte el nombre del conductor",value:""},null,8,["onValueInput"]),(0,t.Wm)(s,{onValueInput:n.saveDni,label:"DNI",name:"dni",id:"dni",placeholder:"Inserte el DNI del conductor",value:""},null,8,["onValueInput"]),(0,t.Wm)(s,{onValueInput:n.saveLicencia,label:"Número de licencia",name:"licencia",id:"licencia",placeholder:"Inserte el número de licencia"},null,8,["onValueInput"]),(0,t.Wm)(s,{onValueInput:n.saveUsuario,label:"Usuario",name:"usuario",id:"usuario",placeholder:"Inserte un usuario para el conductor"},null,8,["onValueInput"]),(0,t.Wm)(i,{onUpdatePaswoord:n.updatepassword,texto:"Contraseña",placeholder:"Ingrese una contraseña"},null,8,["onUpdatePaswoord"]),(0,t.Wm)(i,{onUpdatePaswoord:n.updatepasswordRepeat,texto:"Confirmar contraseña",placeholder:"Repita la contraseña"},null,8,["onUpdatePaswoord"]),""!==n.msgValidacion?((0,t.wg)(),(0,t.iD)("p",{key:0,class:(0,w.C_)({"text-green-500 text-xs":"Las contraseñas coinciden"===n.msgValidacion,"text-red-400 text-xs":"Las contraseñas no coinciden"===n.msgValidacion})},(0,w.zw)(n.msgValidacion),3)):(0,t.kq)("",!0)]),(0,t._)("div",T,[(0,t._)("button",{onClick:a[0]||(a[0]=(...e)=>n.closeModal&&n.closeModal(...e)),class:"bg-gray-400 hover:bg-gray-500 text-white text-sm p-2 px-8 rounded-xl transition duration-300"},"Cerrar"),(0,t._)("button",{onClick:a[1]||(a[1]=(...e)=>n.saveDatos&&n.saveDatos(...e)),class:"bg-blue-400 hover:bg-blue-500 text-white text-sm p-2 px-8 rounded-xl transition duration-300"},"Crear")])])])}var R=o(8692),K=o(3455),Y={name:"ModalCreate",components:{ItemForm:R.Z,PasswordField:K.Z},emits:["close-modal","save-datos"],setup(e,{emit:a}){const o=(0,c.iH)(""),t=(0,c.iH)(""),n=(0,c.iH)(""),l=(0,c.iH)(""),r=(0,c.iH)(""),s=(0,c.iH)(""),i=(0,c.iH)(""),d=()=>{a("close-modal")},u=()=>{a("save-datos",{apellidos:o.value,dni:t.value,licencia:n.value,usuarios:l.value,"contraseña":r.value})},p=e=>{o.value=e},m=e=>{t.value=e},v=e=>{n.value=e},x=e=>{l.value=e},g=e=>{r.value=e},_=e=>{i.value=e,b()},b=()=>{r.value===i.value?s.value="Las contraseñas coinciden":s.value="Las contraseñas no coinciden"};return{closeModal:d,saveDatos:u,saveApellidos:p,saveDni:m,saveLicencia:v,saveUsuario:x,updatepassword:g,msgValidacion:s,updatepasswordRepeat:_}}};const B=(0,$.Z)(Y,[["render",q]]);var G=B,J=o(4050),O=o(4229),Q=o(1968);const X={class:"fixed inset-0 flex items-center justify-center z-[9999]"},ee=(0,t._)("div",{class:"absolute inset-0 bg-black opacity-30 pointer-events-none"},null,-1),ae={class:"relative z-10 p-4 bg-white rounded-xl lg:min-w-[350px] lg:max-w-[450px] min-w-[330px] max-w-[350px]"},oe={class:"p-2 text-gray-700 w-full h-full text-sm"},te=(0,t._)("h3",{class:"text-center font-bold text-lg"},"Editar conductor",-1),ne={class:"btns flex gap-2 justify-center items-center pt-2"};function le(e,a,o,n,l,r){const s=(0,t.up)("ItemForm"),i=(0,t.up)("PasswordField");return(0,t.wg)(),(0,t.iD)("div",X,[ee,(0,t._)("div",ae,[(0,t._)("form",oe,[te,(0,t.Wm)(s,{onValueInput:n.saveApellidos,label:"Apellidos y nombres",name:"apellidos_nombres",id:"apellidos_nombres",placeholder:"Inserte el nombre del conductor",value:n.apellidos},null,8,["onValueInput","value"]),(0,t.Wm)(s,{onValueInput:n.saveDni,label:"DNI",name:"dni",id:"dni",placeholder:"Inserte el DNI del conductor",value:n.dni},null,8,["onValueInput","value"]),(0,t.Wm)(s,{onValueInput:n.saveLicencia,label:"Número de licencia",name:"licencia",id:"licencia",placeholder:"Inserte el número de licencia",value:n.licencia},null,8,["onValueInput","value"]),(0,t.Wm)(s,{onValueInput:n.saveUsuario,label:"Usuario",name:"usuario",id:"usuario",placeholder:"Inserte un usuario para el conductor",value:n.usuarios},null,8,["onValueInput","value"]),(0,t.Wm)(i,{onUpdatePaswoord:n.updatepassword,texto:"Contraseña",placeholder:"Ingrese una contraseña",valor:n.contraseña},null,8,["onUpdatePaswoord","valor"])]),(0,t._)("div",ne,[(0,t._)("button",{onClick:a[0]||(a[0]=(...e)=>n.closeModal&&n.closeModal(...e)),class:"bg-gray-400 hover:bg-gray-500 text-white text-sm p-2 px-8 rounded-xl transition duration-300"},"Cerrar"),(0,t._)("button",{onClick:a[1]||(a[1]=(...e)=>n.saveDatos&&n.saveDatos(...e)),class:"bg-blue-400 hover:bg-blue-500 text-white text-sm p-2 px-8 rounded-xl transition duration-300"},"Actualizar")])])])}var re={name:"ModalEditar",components:{ItemForm:R.Z,PasswordField:K.Z},props:{idUsuario:String,idConductor:String},emits:["cancelar-editar","aceptar-editar"],setup(e,{emit:a}){const o=(0,c.iH)(""),n=(0,c.iH)(""),l=(0,c.iH)(""),r=(0,c.iH)(""),s=(0,c.iH)(""),i=()=>{a("cancelar-editar")},d=e=>{o.value=e},u=e=>{n.value=e},p=e=>{l.value=e},m=e=>{r.value=e},v=e=>{s.value=e},g=()=>{a("aceptar-editar",{id_usuario:e.idUsuario,id_conductor:e.idConductor,apellidos:o.value,dni:n.value,licencia:l.value,usuarios:r.value,"contraseña":s.value})};return(0,t.bv)((()=>{x(e.idUsuario,e.idConductor).then((e=>{o.value=e.data.conductor.apellidos_nombres,n.value=e.data.conductor.numero_documento,l.value=e.data.conductor.numero_licencia,r.value=e.data.conductor.usuario,s.value=e.data.conductor.clave}))})),{closeModal:i,saveDatos:g,saveApellidos:d,saveDni:u,saveLicencia:p,saveUsuario:m,updatepassword:v,apellidos:o,dni:n,licencia:l,usuarios:r,"contraseña":s}}};const se=(0,$.Z)(re,[["render",le]]);var ie=se,de=o(4239),ue={name:"AdminConductores",components:{TableConductores:z,ModalCreate:G,ModalDelete:J.Z,ModalEditar:ie,ModalError:Q.Z,ConfirmEdit:O.Z},setup(){const e=(0,c.iH)(!1),a=(0,c.iH)(!1),o=(0,c.iH)(!1),n=(0,c.iH)([]),l=(0,c.iH)(!1),r=(0,c.iH)(!1),s=(0,c.iH)(""),i=(0,c.iH)(""),d=()=>{e.value=!0},u=()=>{e.value=!1},p=()=>{r.value=!1,window.location.reload()},m=e=>{s.value=e.id_conductores,i.value=e.id_usuario,o.value=!0},x=()=>{_(i.value,s.value).then((e=>{console.log(e.data),o.value=!1,s.value="",i.value="",window.location.reload()})).catch((e=>{console.log(e)}))},w=()=>{s.value="",i.value="",o.value=!1},C=()=>{a.value=!1},h=e=>{s.value=e.id_conductores,i.value=e.id_usuario,a.value=!0},f=o=>{const t=o.id_usuario,n=o.id_conductor,s=o.apellidos,i=o.dni,d=o.licencia,u=o.usuarios,c=o.contraseña;""==s||""==i||""==d||""==u||""==c?(e.value=!1,l.value=!0):b(t,n,i,s,d,u,c).then((e=>{console.log(e.data),a.value=!1,r.value=!0}))},y=a=>{const o=a.apellidos,t=a.dni,n=a.licencia,r=a.usuarios,s=a.contraseña;""==o||""==t||""==n||""==r||""==s?(e.value=!1,l.value=!0):g(t,o,n,de.Z.state.codempresa,r,s).then((a=>{console.log(a.data),e.value=!1,window.location.reload()}))},E=()=>{l.value=!1};return(0,t.bv)((()=>{v(de.Z.state.codempresa).then((e=>{n.value=e.data.conductores}))})),{listConductores:n,openModal:d,openModalV:e,openSuccessEdit:r,closeSuccessEdit:p,closeModal:u,saveDatos:y,confirmDelete:o,eliminarConductor:m,aceptarEliminar:x,cancelarEliminar:w,cancelarEditar:C,editarConductor:h,openModalEdit:a,idConductor:s,idUsuario:i,aceptarEditar:f,openModalError:l,closeModalError:E}}};const ce=(0,$.Z)(ue,[["render",u],["__scopeId","data-v-72502bf6"]]);var pe=ce}}]);
//# sourceMappingURL=242.369f056a.js.map