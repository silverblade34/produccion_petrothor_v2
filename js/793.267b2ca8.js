"use strict";(self["webpackChunklogin_vue"]=self["webpackChunklogin_vue"]||[]).push([[793],{649:function(e,a,t){t.d(a,{Z:function(){return x}});var s=t(3396),o=t(7139);const r={class:"fixed inset-0 flex items-center justify-center z-50"},n=(0,s._)("div",{class:"absolute inset-0 bg-black opacity-30 pointer-events-none"},null,-1),l={class:"relative z-30 p-4 bg-white rounded-xl min-w-[350px] max-w-[450px]"},i=(0,s._)("svg",{"aria-hidden":"true",class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),u=(0,s._)("span",{class:"sr-only"},"Close modal",-1),d=[i,u],c={class:"p-6 text-center"},p=(0,s._)("svg",{"aria-hidden":"true",class:"mx-auto mb-4 w-14 h-14 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),m={class:"mb-5 text-lg font-normal text-gray-500"};function g(e,a,t,i,u,g){return(0,s.wg)(),(0,s.iD)("div",r,[n,(0,s._)("div",l,[(0,s._)("button",{type:"button",onClick:a[0]||(a[0]=(...e)=>i.cancelarEliminar&&i.cancelarEliminar(...e)),class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-800 dark:hover:text-white","data-modal-hide":"popup-modal"},d),(0,s._)("div",c,[p,(0,s._)("h3",m,(0,o.zw)(t.pregunta),1),(0,s._)("button",{"data-modal-hide":"popup-modal",type:"button",onClick:a[1]||(a[1]=(...e)=>i.aceptarEliminar&&i.aceptarEliminar(...e)),class:"text-white bg-red-500 hover:bg-red-600 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2 ease-in duration-300"}," Si, eliminar "),(0,s._)("button",{"data-modal-hide":"popup-modal",type:"button",onClick:a[2]||(a[2]=(...e)=>i.cancelarEliminar&&i.cancelarEliminar(...e)),class:"text-white bg-gray-400 hover:bg-gray-500 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 focus:z-10 ease-in duration-300"},"No, cancelar")])])])}var h={name:"ModalDelete",props:{pregunta:String},emits:["aceptar-eliminar","cancelar-eliminar"],setup(e,{emit:a}){const t=()=>{a("aceptar-eliminar")},s=()=>{a("cancelar-eliminar")};return{aceptarEliminar:t,cancelarEliminar:s}}},w=t(89);const v=(0,w.Z)(h,[["render",g]]);var x=v},8779:function(e,a,t){t.r(a),t.d(a,{default:function(){return Me}});var s=t(3396),o=t(9242);const r=e=>((0,s.dD)("data-v-5220c73b"),e=e(),(0,s.Cn)(),e),n={class:"min-h-full w-full pb-[3rem]"},l={class:"mb-8 flex justify-between items-center"},i=r((()=>(0,s._)("h3",{class:"text-2xl font-semibold text-neutral-600"},"Administrar cuentas",-1))),u={class:"relative text-sm overflow-x-auto shadow-md sm:rounded-2xl"};function d(e,a,t,r,d,c){const p=(0,s.up)("TableUsers"),m=(0,s.up)("ModalCreate"),g=(0,s.up)("ModalDelete");return(0,s.wg)(),(0,s.iD)("section",n,[(0,s._)("div",l,[i,(0,s._)("button",{onClick:a[0]||(a[0]=(...e)=>r.openModal&&r.openModal(...e)),class:"py-2 px-3 rounded-xl bg-orange-400 text-white text-sm hover:bg-orange-500 transition duration-300"}," Crear cuenta ")]),(0,s._)("div",u,[(0,s.Wm)(p,{listaUsuarios:r.ListUsers,onEliminarUsuario:r.eliminarUsuario},null,8,["listaUsuarios","onEliminarUsuario"])]),(0,s.Wm)(o.uT,{name:"modal",mode:"out-in"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(m,{onCloseModal:r.closeModal,onSaveDatos:r.crearCuenta},null,8,["onCloseModal","onSaveDatos"]),[[o.F8,r.openModalV]])])),_:1}),(0,s.Wm)(o.uT,{name:"modal",mode:"out-in"},{default:(0,s.w5)((()=>[r.confirmDelete?((0,s.wg)(),(0,s.j4)(g,{key:0,onAceptarEliminar:r.aceptarEliminar,onCancelarEliminar:r.cancelarEliminar,pregunta:"¿Estás seguro de eliminar este usuario?"},null,8,["onAceptarEliminar","onCancelarEliminar"])):(0,s.kq)("",!0)])),_:1})])}var c=t(4870),p=t(4239),m=t(4161);const g="http://67.205.184.183:3000/api/";function h(e,a){return m.Z.get(`${g}usuarios/listar_clientes?tipousuario=${a}&codempresa=${e}`)}function w(e,a,t,s,o){return m.Z.post(`${g}usuarios/crear_usuarios`,{codempresa_cuenta:e,tipousuario:a,usuario:t,password:o,empresa_conductor:s})}function v(e,a){const t=new FormData;return console.log("enviara la imagen mediante http"),t.append("logoImage",e),t.append("codempresa",a),console.log(t),m.Z.post(`${g}usuarios/guardarLogo`,t,{headers:{"Content-Type":"multipart/form-data"}})}function x(e,a,t){return m.Z["delete"](`${g}usuarios/cuenta_eliminar`,{data:{idUsuario:e,codempresa:a,tipousuario:t}})}var f=t(7139),b=t.p+"img/icon-user.d6deea94.png";const y={class:"w-full text-xs text-left text-gray-500 dark:text-gray-400"},_=(0,s._)("thead",{class:"text-xs uppercase bg-gray-400 text-white"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"px-6 py-3"}," Usuario "),(0,s._)("th",{scope:"col",class:"px-6 py-3"}," Empresa "),(0,s._)("th",{scope:"col",class:"px-6 py-3"}," Estado "),(0,s._)("th",{scope:"col",class:"px-6 py-3"}," Acciones ")])],-1),k={scope:"row",class:"flex items-center px-6 py-3 text-gray-900 whitespace-nowrap"},C=(0,s._)("img",{class:"w-10 h-10 rounded-full",src:b,alt:"Icon user"},null,-1),U={class:"pl-3"},D={class:"text-gray-800 font-medium"},M={class:"px-6 py-3 text-gray-800"},E=(0,s._)("td",{class:"px-6 py-3 text-gray-800"},[(0,s._)("div",{class:"flex items-center"},[(0,s._)("div",{class:"h-2.5 w-2.5 rounded-full bg-green-500 mr-2"}),(0,s.Uk)(" Activo ")])],-1),Z={class:"px-6 py-3"},V=(0,s._)("a",{href:"#",class:"mr-2 p-2 font-medium text-white bg-green-500 hover:bg-green-700 ease-in duration-300 rounded-lg"},"Editar",-1),F=["onClick"];function P(e,a,t,r,n,l){return(0,s.wg)(),(0,s.iD)("table",y,[_,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.listaUsuarios,(e=>((0,s.wg)(),(0,s.iD)("tr",{class:"bg-white border-b",key:e.id},[(0,s._)("th",k,[C,(0,s._)("div",U,[(0,s._)("div",D,(0,f.zw)(e.usuario),1)])]),(0,s._)("td",M,(0,f.zw)(e.conductor),1),E,(0,s._)("td",Z,[V,(0,s._)("a",{href:"#",class:"p-2 font-medium text-white bg-red-500 hover:bg-red-700 ease-in duration-300 rounded-lg",onClick:(0,o.iM)((a=>l.eliminarUsuario(e.id,e.codempresa)),["prevent"])},"Eliminar",8,F)])])))),128))])])}var z={name:"TableUsers",props:{listaUsuarios:Array},methods:{eliminarUsuario(e,a){this.$emit("eliminar-usuario",e,a)}}},I=t(89);const L=(0,I.Z)(z,[["render",P]]);var S=L;const A={class:"fixed inset-0 flex items-center justify-center z-50"},$=(0,s._)("div",{class:"absolute inset-0 bg-black opacity-30 pointer-events-none"},null,-1),j={class:"relative z-10 p-4 bg-slate-200 rounded-xl min-w-[350px] max-w-[450px]"},H={class:"p-2 text-gray-700 w-full h-full text-sm"},W=(0,s._)("h3",{class:"text-center font-bold text-lg"},"Crear cuenta",-1),q={class:"btns flex gap-2 justify-center items-center pt-2"};function T(e,a,t,o,r,n){const l=(0,s.up)("UserField"),i=(0,s.up)("BusinnesField"),u=(0,s.up)("LogoimgField"),d=(0,s.up)("PasswordFieldVue");return(0,s.wg)(),(0,s.iD)("div",A,[$,(0,s._)("div",j,[(0,s._)("form",H,[W,(0,s.Wm)(l,{onUpdateValue:n.updateusuario},null,8,["onUpdateValue"]),(0,s.Wm)(i,{onUpdateValue:n.updatebusinnes},null,8,["onUpdateValue"]),(0,s.Wm)(u,{onFileSelected:n.updateImg},null,8,["onFileSelected"]),(0,s.Wm)(d,{onUpdatePaswoord:n.updatepassword,texto:"Contraseña",placeholder:"Ingrese contraseña"},null,8,["onUpdatePaswoord"]),(0,s.Wm)(d,{onUpdatePaswoord:n.updatepasswordRepeat,texto:"Confirmar contraseña",placeholder:"Repita su contraseña"},null,8,["onUpdatePaswoord"]),""!==r.msgValidacion?((0,s.wg)(),(0,s.iD)("p",{key:0,class:(0,f.C_)({"text-green-500 text-xs":"Las contraseñas coinciden"===r.msgValidacion,"text-red-400 text-xs":"Las contraseñas no coinciden"===r.msgValidacion})},(0,f.zw)(r.msgValidacion),3)):(0,s.kq)("",!0)]),(0,s._)("div",q,[(0,s._)("button",{onClick:a[0]||(a[0]=(...e)=>n.closeModal&&n.closeModal(...e)),class:"bg-gray-400 hover:bg-gray-500 text-white text-sm p-2 px-4 rounded-xl transition duration-300"},"Cerrar"),(0,s._)("button",{onClick:a[1]||(a[1]=(...e)=>n.saveDatos&&n.saveDatos(...e)),class:"bg-blue-400 hover:bg-blue-500 text-white text-sm p-2 px-4 rounded-xl transition duration-300"},"Crear")])])])}const B=(0,s._)("label",{class:"py-1"},"Usuario",-1),Y=["value"];function R(e,a,t,o,r,n){return(0,s.wg)(),(0,s.iD)(s.HY,null,[B,(0,s._)("input",{type:"text",name:"usuario",value:e.value,onInput:a[0]||(a[0]=a=>e.$emit("update-value",a.target.value)),class:"w-full text-sm p-2 px-3 rounded-lg focus:outline-none focus:border-blue-500",placeholder:"Usuario de cuenta"},null,40,Y)],64)}var N=(0,s.aZ)({name:"UserField",props:{value:{type:String,required:!0}}});const K=(0,I.Z)(N,[["render",R]]);var G=K;const J=(0,s._)("label",{class:"py-1"},"Empresa",-1),O=["value"];function Q(e,a,t,o,r,n){return(0,s.wg)(),(0,s.iD)(s.HY,null,[J,(0,s._)("input",{type:"text",name:"empresa",value:t.value,onInput:a[0]||(a[0]=a=>e.$emit("update-value",a.target.value)),class:"w-full text-sm p-2 px-3 rounded-lg focus:outline-none focus:border-blue-500",placeholder:"Nombre de empresa"},null,40,O)],64)}var X={props:{value:{type:String,required:!0}}};const ee=(0,I.Z)(X,[["render",Q]]);var ae=ee;const te={class:"py-1"},se={class:"relative"},oe=["type","placeholder"],re={key:0,class:"fa-solid fa-eye"},ne={key:1,class:"fa-solid fa-eye-slash"};function le(e,a,t,r,n,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("p",te,(0,f.zw)(t.texto),1),(0,s._)("div",se,[(0,s._)("input",{type:n.showPassword?"text":"password",name:"password",onInput:a[0]||(a[0]=a=>e.$emit("update-paswoord",a.target.value)),class:"w-full text-sm p-2 px-3 rounded-lg focus:outline-none focus:border-blue-500",placeholder:t.placeholder},null,40,oe),(0,s._)("button",{onClick:a[1]||(a[1]=(0,o.iM)(((...e)=>l.togglePasswordVisibility&&l.togglePasswordVisibility(...e)),["prevent"])),class:"absolute top-1/2 right-3 transform -translate-y-1/2 focus:outline-none"},[n.showPassword?((0,s.wg)(),(0,s.iD)("i",re)):((0,s.wg)(),(0,s.iD)("i",ne))])])],64)}var ie={props:{value:{type:String,required:!0},texto:String,placeholder:String},data(){return{showPassword:!1}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword}}};const ue=(0,I.Z)(ie,[["render",le]]);var de=ue;const ce=(0,s._)("label",{class:"block text-sm font-medium",for:"file_input"},"Cargar logo",-1),pe={class:"flex items-center justify-center w-full"},me={for:"dropzone-file",class:"flex flex-col items-center justify-center w-full border-2 text-gray-400 border-dashed rounded-lg cursor-pointer hover:bg-gray-100 bg-white border-gray-300 hover:border-gray-400"},ge=(0,s._)("div",{class:"flex flex-col items-center justify-center pt-3 pb-4"},[(0,s._)("svg",{"aria-hidden":"true",class:"w-7 h-7 mb-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),(0,s._)("p",{class:"mb-1 text-xs"},"Dale click para cargar imagen")],-1),he={key:0,class:"text-sm text-green-700"},we=(0,s._)("i",{class:"fa-sharp fa-solid fa-circle-check"},null,-1);function ve(e,a,t,o,r,n){return(0,s.wg)(),(0,s.iD)("div",null,[ce,(0,s._)("div",pe,[(0,s._)("label",me,[ge,(0,s._)("input",{id:"dropzone-file",type:"file",class:"hidden",accept:"image/png",onChange:a[0]||(a[0]=(...e)=>n.handleFileSelect&&n.handleFileSelect(...e))},null,32)])]),""!==r.nombreArchivo?((0,s.wg)(),(0,s.iD)("p",he,[we,(0,s.Uk)(" Imagen registrada: "+(0,f.zw)(r.nombreArchivo),1)])):(0,s.kq)("",!0)])}var xe={data(){return{nombreArchivo:""}},methods:{handleFileSelect(e){const a=e.target.files[0];this.nombreArchivo=a?a.name:"",this.$emit("file-selected",a)}}};const fe=(0,I.Z)(xe,[["render",ve]]);var be=fe,ye={name:"ModalCreate",components:{UserField:G,BusinnesField:ae,PasswordFieldVue:de,LogoimgField:be},data(){return{logoImage:null,usuario:"",empresa:"",password:"",repeatpassword:"",msgValidacion:"",nombreArchivo:""}},methods:{updateusuario(e){this.usuario=e},updatebusinnes(e){this.empresa=e},updatepassword(e){this.password=e},updatepasswordRepeat(e){this.repeatpassword=e,this.validatePassword()},updateImg(e){this.logoImage=e},closeModal(){this.$emit("close-modal")},saveDatos(){this.$emit("save-datos",{usuario:this.usuario,empresa:this.empresa,password:this.password,logoImage:this.logoImage})},validatePassword(){this.password===this.repeatpassword?this.msgValidacion="Las contraseñas coinciden":this.msgValidacion="Las contraseñas no coinciden"}}};const _e=(0,I.Z)(ye,[["render",T]]);var ke=_e,Ce=t(649),Ue={name:"AdminCuentas",components:{TableUsers:S,ModalCreate:ke,ModalDelete:Ce.Z},setup(){const e=(0,c.iH)([]),a=(0,c.iH)(!1),t=(0,c.iH)(!1),o=(0,c.iH)(""),r=(0,c.iH)("");(0,s.bv)((()=>{h(p.Z.state.codempresa,p.Z.state.tipousuario).then((a=>{e.value=a.data.usuarios}))}));const n=()=>{a.value=!0},l=()=>{a.value=!1},i=e=>{const t=e.usuario,s=e.empresa,o=e.password,r=e.logoImage;w(p.Z.state.codempresa,p.Z.state.tipousuario,t,s,o).then((e=>{"C000"==p.Z.state.codempresa&&"1"==p.Z.state.tipousuario&&(console.log(e.data.codempresa),v(r,e.data.codempresa)),a.value=!1,window.location.reload()}))},u=(e,a)=>{o.value=e,r.value=a,t.value=!0},d=()=>{x(o.value,r.value,p.Z.state.tipousuario).then((e=>{console.log(e),window.location.reload(),t.value=!1}))},m=()=>{t.value=!1,o.value="",r.value=""};return{ListUsers:e,openModalV:a,openModal:n,closeModal:l,crearCuenta:i,confirmDelete:t,eliminarUsuario:u,aceptarEliminar:d,cancelarEliminar:m}}};const De=(0,I.Z)(Ue,[["render",d],["__scopeId","data-v-5220c73b"]]);var Me=De}}]);
//# sourceMappingURL=793.267b2ca8.js.map