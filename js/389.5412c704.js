"use strict";(self["webpackChunklogin_vue"]=self["webpackChunklogin_vue"]||[]).push([[389],{9846:function(e,a,o){o.r(a),o.d(a,{default:function(){return we}});var t=o(3396),n=o(9242);const l=e=>((0,t.dD)("data-v-574bf794"),e=e(),(0,t.Cn)(),e),s={class:"min-h-full w-full pb-[5rem] lg:pb-[2rem]"},r={class:"mb-8 flex justify-between items-center"},i=l((()=>(0,t._)("h3",{class:"title-vista text-2xl font-semibold text-neutral-600"},"Administrar conductores",-1))),u={class:"overflow-x-auto shadow-md sm:rounded-lg"};function d(e,a,o,l,d,c){const p=(0,t.up)("TableConductores"),m=(0,t.up)("ModalCreate"),v=(0,t.up)("ModalDelete"),g=(0,t.up)("ModalEditar"),x=(0,t.up)("ModalError"),b=(0,t.up)("ConfirmEdit");return(0,t.wg)(),(0,t.iD)("section",s,[(0,t._)("div",r,[i,(0,t._)("button",{onClick:a[0]||(a[0]=(...e)=>l.openModal&&l.openModal(...e)),class:"py-2 px-3 rounded-xl bg-orange-400 text-white lg:text-sm text-xs hover:bg-orange-500 transition duration-300"}," Crear nuevo ")]),(0,t._)("div",u,[(0,t.Wm)(p,{listConductores:l.listConductores,onEliminarConductor:l.eliminarConductor,onEditarConductor:l.editarConductor},null,8,["listConductores","onEliminarConductor","onEditarConductor"])]),(0,t.Wm)(n.uT,{name:"modal",mode:"out-in"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(m,{onCloseModal:l.closeModal,onSaveDatos:l.saveDatos},null,8,["onCloseModal","onSaveDatos"]),[[n.F8,l.openModalV]])])),_:1}),(0,t.Wm)(n.uT,{name:"modal",mode:"out-in"},{default:(0,t.w5)((()=>[l.confirmDelete?((0,t.wg)(),(0,t.j4)(v,{key:0,onAceptarEliminar:l.aceptarEliminar,onCancelarEliminar:l.cancelarEliminar,pregunta:"¿Estás seguro de eliminar a este conductor?"},null,8,["onAceptarEliminar","onCancelarEliminar"])):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(n.uT,{name:"modal",mode:"out-in"},{default:(0,t.w5)((()=>[l.openModalEdit?((0,t.wg)(),(0,t.j4)(g,{key:0,onAceptarEditar:l.aceptarEditar,onCancelarEditar:l.cancelarEditar,idUsuario:l.idUsuario,idConductor:l.idConductor},null,8,["onAceptarEditar","onCancelarEditar","idUsuario","idConductor"])):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(n.uT,{name:"modal",mode:"out-in"},{default:(0,t.w5)((()=>[l.openModalError?((0,t.wg)(),(0,t.j4)(x,{key:0,onCloseModal:l.closeModalError,title:"Advertencia",mensaje:"Se debe rellenar todos los campos al crear o editar un conductor"},null,8,["onCloseModal"])):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(n.uT,{name:"modal",mode:"out-in"},{default:(0,t.w5)((()=>[l.openSuccessEdit?((0,t.wg)(),(0,t.j4)(b,{key:0,title:"Logrado",mensaje:"Se ha editado correctamente",onCloseModal:l.closeSuccessEdit},null,8,["onCloseModal"])):(0,t.kq)("",!0)])),_:1})])}var c=o(4870),p=o(4161);const m="http://67.205.184.183:3020/api/";function v(e){return p.Z.get(`${m}conductores/list?codempresa=${e}`)}function g(e,a){return p.Z.get(`${m}conductores/search?id_usuario=${e}&id_conductores=${a}`)}function x(e,a,o,t,n,l){return p.Z.post(`${m}conductores/create`,{numero_documento:e,apellidos_nombres:a,numero_licencia:o,codempresa:t,usuario:n,password:l})}function b(e,a,o){return p.Z["delete"](`${m}conductores/delete?id_usuario=${e}&id_conductores=${a}&codempresa=${o}`)}function w(e,a,o,t,n,l,s,r){return p.Z.put(`${m}conductores/edit`,{id_usuario:e,id_conductores:a,numero_documento:o,apellidos_nombres:t,numero_licencia:n,usuario:l,clave:s,codempresa:r})}var _=o(7139);const C={class:"w-full text-xs text-left text-gray-800"},h=(0,t._)("thead",{class:"text-xs text-gray-700 uppercase bg-gray-100"},[(0,t._)("tr",null,[(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Usuario "),(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Codempresa "),(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Nombre y apellidos "),(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Número de licencia "),(0,t._)("th",{scope:"col",class:"px-6 py-3"}," Acciones ")])],-1),f={key:0},y=(0,t._)("td",{class:"border px-4 py-4 text-xs text-center",colspan:"6"},"No se encontró ningún dato para esta tabla",-1),E=[y],M={class:"px-6 py-3"},D={class:"px-6 py-3"},I={scope:"row",class:"px-6 py-3 font-medium text-gray-900 whitespace-nowrap"},k={scope:"row",class:"px-6 py-3 font-medium text-gray-900 whitespace-nowrap"},V={class:"px-6 py-2 flex gap-2"},H=["onClick"],U=["onClick"];function Z(e,a,o,l,s,r){return(0,t.wg)(),(0,t.iD)("table",C,[h,(0,t._)("tbody",null,[0===o.listConductores.length?((0,t.wg)(),(0,t.iD)("tr",f,E)):((0,t.wg)(!0),(0,t.iD)(t.HY,{key:1},(0,t.Ko)(o.listConductores,(e=>((0,t.wg)(),(0,t.iD)("tr",{key:e.id_usuario,class:"bg-white border-b hover:bg-gray-50 ease-in duration-300"},[(0,t._)("td",M,(0,_.zw)(e.usuario),1),(0,t._)("td",D,(0,_.zw)(e.codempresa),1),(0,t._)("th",I,(0,_.zw)(e.apellidos_nombres),1),(0,t._)("th",k,(0,_.zw)(e.numero_licencia),1),(0,t._)("td",V,[(0,t._)("button",{class:"font-medium py-[0.5rem] px-3 rounded-lg bg-green-500 hover:bg-green-600 ease-in duration-300 text-white",onClick:(0,n.iM)((a=>r.editarConductor(e.id_usuario,e.id_conductores,e.placa)),["prevent"])},"Editar",8,H),(0,t._)("button",{class:"font-medium py-[0.5rem] px-3 rounded-lg bg-red-500 hover:bg-red-600 ease-in duration-300 text-white",onClick:(0,n.iM)((a=>r.eliminarConductor(e.id_usuario,e.id_conductores,e.placa)),["prevent"])},"Eliminar",8,U)])])))),128))])])}var W={name:"TableConductores",props:{listConductores:Array},methods:{eliminarConductor(e,a,o){this.$emit("eliminar-conductor",{id_usuario:e,id_conductores:a,placa:o})},editarConductor(e,a){this.$emit("editar-conductor",{id_usuario:e,id_conductores:a})}}},A=o(89);const $=(0,A.Z)(W,[["render",Z]]);var j=$;const P={class:"fixed inset-0 flex items-center justify-center z-[9999]"},z=(0,t._)("div",{class:"absolute inset-0 bg-black opacity-30 pointer-events-none"},null,-1),S={class:"relative z-10 p-4 bg-white rounded-xl lg:min-w-[350px] lg:max-w-[450px] max-w-[340px] min-w-[330px]"},F={class:"p-2 text-gray-700 w-full h-full text-sm"},L=(0,t._)("h3",{class:"text-center font-bold text-lg"},"Crear conductor",-1),N={key:0},T={key:0,class:"text-green-400"},q={key:1,class:"text-orange-400"},R={key:2,class:"text-red-400"},K={class:"btns flex gap-2 justify-center items-center pt-2"};function Y(e,a,o,n,l,s){const r=(0,t.up)("ItemForm"),i=(0,t.up)("PasswordField");return(0,t.wg)(),(0,t.iD)("div",P,[z,(0,t._)("div",S,[(0,t._)("form",F,[L,(0,t.Wm)(r,{onValueInput:n.saveApellidos,label:"Apellidos y nombres",name:"apellidos_nombres",id:"apellidos_nombres",placeholder:"Inserte el nombre del conductor",value:""},null,8,["onValueInput"]),(0,t.Wm)(r,{onValueInput:n.saveDni,label:"DNI",name:"dni",id:"dni",placeholder:"Inserte el DNI del conductor",value:""},null,8,["onValueInput"]),(0,t.Wm)(r,{onValueInput:n.saveLicencia,label:"Número de licencia",name:"licencia",id:"licencia",placeholder:"Inserte el número de licencia"},null,8,["onValueInput"]),(0,t.Wm)(r,{onValueInput:n.saveUsuario,label:"Usuario",name:"usuario",id:"usuario",placeholder:"Inserte un usuario para el conductor"},null,8,["onValueInput"]),""!=n.msgValidacionUsuario?((0,t.wg)(),(0,t.iD)("span",N,["true"==n.msgValidacionUsuario?((0,t.wg)(),(0,t.iD)("span",T,"Este usuario está disponible")):"false2"==n.msgValidacionUsuario?((0,t.wg)(),(0,t.iD)("span",q,"El usuario debe tener más de 3 caracteres")):((0,t.wg)(),(0,t.iD)("span",R,"Este usuario ya existe"))])):(0,t.kq)("",!0),(0,t.Wm)(i,{onUpdatePaswoord:n.updatepassword,texto:"Contraseña",placeholder:"Ingrese una contraseña"},null,8,["onUpdatePaswoord"]),(0,t.Wm)(i,{onUpdatePaswoord:n.updatepasswordRepeat,texto:"Confirmar contraseña",placeholder:"Repita la contraseña"},null,8,["onUpdatePaswoord"]),""!==n.msgValidacion?((0,t.wg)(),(0,t.iD)("p",{key:1,class:(0,_.C_)({"text-green-500 text-xs":"Las contraseñas coinciden"===n.msgValidacion,"text-red-400 text-xs":"Las contraseñas no coinciden"===n.msgValidacion})},(0,_.zw)(n.msgValidacion),3)):(0,t.kq)("",!0)]),(0,t._)("div",K,[(0,t._)("button",{onClick:a[0]||(a[0]=(...e)=>n.closeModal&&n.closeModal(...e)),class:"bg-gray-400 hover:bg-gray-500 text-white text-sm p-2 px-8 rounded-xl transition duration-300"},"Cerrar"),(0,t._)("button",{onClick:a[1]||(a[1]=(...e)=>n.saveDatos&&n.saveDatos(...e)),class:"bg-blue-400 hover:bg-blue-500 text-white text-sm p-2 px-8 rounded-xl transition duration-300"},"Crear")])])])}var B=o(8692),G=o(3455),J=o(6236),O={name:"ModalCreate",components:{ItemForm:B.Z,PasswordField:G.Z},emits:["close-modal","save-datos"],setup(e,{emit:a}){const o=(0,c.iH)(""),t=(0,c.iH)(""),n=(0,c.iH)(""),l=(0,c.iH)(""),s=(0,c.iH)(""),r=(0,c.iH)(""),i=(0,c.iH)(""),u=(0,c.iH)(""),d=()=>{a("close-modal")},p=()=>{a("save-datos",{apellidos:o.value,dni:t.value,licencia:n.value,usuarios:l.value,"contraseña":s.value})},m=e=>{o.value=e},v=e=>{t.value=e},g=e=>{n.value=e},x=e=>{l.value=e,e.length>3?(0,J.oP)(e).then((e=>{e.data.status?u.value="true":u.value="false"})).catch((()=>{u.value="false"})):u.value="false2"},b=e=>{s.value=e},w=e=>{i.value=e,_()},_=()=>{s.value===i.value?r.value="Las contraseñas coinciden":r.value="Las contraseñas no coinciden"};return{closeModal:d,saveDatos:p,msgValidacionUsuario:u,saveApellidos:m,saveDni:v,saveLicencia:g,saveUsuario:x,updatepassword:b,msgValidacion:r,updatepasswordRepeat:w}}};const Q=(0,A.Z)(O,[["render",Y]]);var X=Q,ee=o(4050),ae=o(4229),oe=o(1968);const te={class:"fixed inset-0 flex items-center justify-center z-[9999]"},ne=(0,t._)("div",{class:"absolute inset-0 bg-black opacity-30 pointer-events-none"},null,-1),le={class:"relative z-10 p-4 bg-white rounded-xl lg:min-w-[350px] lg:max-w-[450px] min-w-[330px] max-w-[350px]"},se={class:"p-2 text-gray-700 w-full h-full text-sm"},re=(0,t._)("h3",{class:"text-center font-bold text-lg"},"Editar conductor",-1),ie={class:"btns flex gap-2 justify-center items-center pt-2"};function ue(e,a,o,n,l,s){const r=(0,t.up)("ItemForm"),i=(0,t.up)("PasswordField");return(0,t.wg)(),(0,t.iD)("div",te,[ne,(0,t._)("div",le,[(0,t._)("form",se,[re,(0,t.Wm)(r,{onValueInput:n.saveApellidos,label:"Apellidos y nombres",name:"apellidos_nombres",id:"apellidos_nombres",placeholder:"Inserte el nombre del conductor",value:n.apellidos},null,8,["onValueInput","value"]),(0,t.Wm)(r,{onValueInput:n.saveDni,label:"DNI",name:"dni",id:"dni",placeholder:"Inserte el DNI del conductor",value:n.dni},null,8,["onValueInput","value"]),(0,t.Wm)(r,{onValueInput:n.saveLicencia,label:"Número de licencia",name:"licencia",id:"licencia",placeholder:"Inserte el número de licencia",value:n.licencia},null,8,["onValueInput","value"]),(0,t.Wm)(r,{onValueInput:n.saveUsuario,label:"Usuario",name:"usuario",id:"usuario",placeholder:"Inserte un usuario para el conductor",value:n.usuarios},null,8,["onValueInput","value"]),(0,t.Wm)(i,{onUpdatePaswoord:n.updatepassword,texto:"Contraseña",placeholder:"Ingrese una contraseña",valor:n.contraseña},null,8,["onUpdatePaswoord","valor"])]),(0,t._)("div",ie,[(0,t._)("button",{onClick:a[0]||(a[0]=(...e)=>n.closeModal&&n.closeModal(...e)),class:"bg-gray-400 hover:bg-gray-500 text-white text-sm p-2 px-8 rounded-xl transition duration-300"},"Cerrar"),(0,t._)("button",{onClick:a[1]||(a[1]=(...e)=>n.saveDatos&&n.saveDatos(...e)),class:"bg-blue-400 hover:bg-blue-500 text-white text-sm p-2 px-8 rounded-xl transition duration-300"},"Actualizar")])])])}var de=o(9564),ce=o.n(de),pe={name:"ModalEditar",components:{ItemForm:B.Z,PasswordField:G.Z},props:{idUsuario:String,idConductor:String},emits:["cancelar-editar","aceptar-editar"],setup(e,{emit:a}){const o=(0,c.iH)(""),n=(0,c.iH)(""),l=(0,c.iH)(""),s=(0,c.iH)(""),r=(0,c.iH)(""),i=(0,c.iH)(""),u=(0,c.iH)(""),d=()=>{a("cancelar-editar")},p=e=>{o.value=e},m=e=>{n.value=e},v=e=>{l.value=e},x=e=>{s.value=e},b=e=>{i.value=e},w=()=>{let t=r.value;""!==i.value&&(t=ce()(i.value)),a("aceptar-editar",{id_usuario:e.idUsuario,id_conductor:e.idConductor,apellidos:o.value,dni:n.value,licencia:l.value,usuarios:s.value,"contraseña":t})};return(0,t.bv)((()=>{g(e.idUsuario,e.idConductor).then((e=>{o.value=e.data.conductor.apellidos_nombres,n.value=e.data.conductor.numero_documento,l.value=e.data.conductor.numero_licencia,s.value=e.data.conductor.usuario,r.value=e.data.conductor.clave,u.value=e.data.conductor.placa}))})),{closeModal:d,saveDatos:w,saveApellidos:p,saveDni:m,saveLicencia:v,saveUsuario:x,updatepassword:b,apellidos:o,dni:n,licencia:l,usuarios:s,"contraseña":r}}};const me=(0,A.Z)(pe,[["render",ue]]);var ve=me,ge=o(4239),xe={name:"AdminConductores",components:{TableConductores:j,ModalCreate:X,ModalDelete:ee.Z,ModalEditar:ve,ModalError:oe.Z,ConfirmEdit:ae.Z},setup(){const e=(0,c.iH)(!1),a=(0,c.iH)(!1),o=(0,c.iH)(!1),n=(0,c.iH)([]),l=(0,c.iH)(!1),s=(0,c.iH)(!1),r=(0,c.iH)(""),i=(0,c.iH)(""),u=()=>{e.value=!0},d=()=>{e.value=!1},p=()=>{s.value=!1,window.location.reload()},m=e=>{r.value=e.id_conductores,i.value=e.id_usuario,o.value=!0},g=()=>{b(i.value,r.value,ge.Z.state.codempresa).then((e=>{console.log(e.data),o.value=!1,r.value="",i.value="",window.location.reload()})).catch((e=>{console.log(e)}))},_=()=>{r.value="",i.value="",o.value=!1},C=()=>{a.value=!1},h=e=>{r.value=e.id_conductores,i.value=e.id_usuario,a.value=!0},f=o=>{const t=o.id_usuario,n=o.id_conductor,r=o.apellidos,i=o.dni,u=o.licencia,d=o.usuarios,c=o.contraseña;""==r||""==i||""==u||""==d||""==c?(e.value=!1,l.value=!0):w(t,n,i,r,u,d,c,ge.Z.state.codempresa).then((e=>{console.log(e.data),a.value=!1,s.value=!0}))},y=a=>{const o=a.apellidos,t=a.dni,n=a.licencia,s=a.usuarios,r=a.contraseña;""==o||""==t||""==n||""==s||""==r?(e.value=!1,l.value=!0):x(t,o,n,ge.Z.state.codempresa,s,r).then((a=>{console.log(a.data),e.value=!1,window.location.reload()}))},E=()=>{l.value=!1};return(0,t.bv)((()=>{v(ge.Z.state.codempresa).then((e=>{n.value=e.data.conductores}))})),{listConductores:n,openModal:u,openModalV:e,openSuccessEdit:s,closeSuccessEdit:p,closeModal:d,saveDatos:y,confirmDelete:o,eliminarConductor:m,aceptarEliminar:g,cancelarEliminar:_,cancelarEditar:C,editarConductor:h,openModalEdit:a,idConductor:r,idUsuario:i,aceptarEditar:f,openModalError:l,closeModalError:E}}};const be=(0,A.Z)(xe,[["render",d],["__scopeId","data-v-574bf794"]]);var we=be}}]);
//# sourceMappingURL=389.5412c704.js.map